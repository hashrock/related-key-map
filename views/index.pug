extends layout

mixin key(key_name, chords, style)
  div(class!=attributes.class, id!=attributes.id)
    a(href="#inline" class="inline")
      img.expand-image
    .key-name-box
    .switch-enharmonic-mode.enharmonic-mode-symbol.enharmonic-mode-sharp= "♯"
    .switch-enharmonic-mode.enharmonic-mode-symbol.enharmonic-mode-flat= "♭"
    .switch-enharmonic-mode.enharmonic-mode-rotate.rotate-symbol= "⇄"
    .switch-minor-scale-mode.minor-scale-mode-name= ""
    .switch-minor-scale-mode.minor-scale-mode-rotate.rotate-symbol= "⇄"
    .chords-box
      .chords-line
      .chords-line

mixin tonic-key(id)
  +key(id=id, class="tonic-key")

mixin directly-related-key(id)
  +key(id=id, class="directly-related-key")

mixin indirectly-related-key(id)
  +key(id=id, class="indirectly-related-key")

mixin dominant-arrow
  .arrow-box
    .arrow-box-title= dominant_key
    .up-arrow

mixin subdominant-arrow
  .arrow-box
    .down-arrow
    .arrow-box-bottom-padding
    .arrow-box-title= subdominant_key

mixin arrow-row(arrow_type)
  .arrow-row
    .arrow-padding-side
    +#{arrow_type}
    .arrow-padding-mid
    +#{arrow_type}
    .arrow-padding-mid
    +#{arrow_type}
    .arrow-padding-side 

mixin dominant-arrow-row
  +arrow-row("dominant-arrow")

mixin subdominant-arrow-row
  +arrow-row("subdominant-arrow")

mixin left-arrow
  .arrow-box
    .arrow-box-head-padding
    .arrow-box-title= parallel_key
    .left-arrow

mixin right-arrow
  .arrow-box
    .arrow-box-head-padding
    .arrow-box-title= relative_key
    .right-arrow

mixin link-icon(title, class_name, fa_class_name)
  div(class!=`sns-button ${class_name}` style={display: "none"})
    a(href="" title=title target="_blank")
      i(class!=`fab fa-lg ${fa_class_name}` aria-hidden="true")

block content
  .header-box
    .title-text-box
      h1
        a= title
    .language-box
      a
        i(class=`fas fa-globe-asia` aria-hidden="true")
        span.current-language= current_language
      ul(class="items")
        each lang_name, lang_id in language_list
          li
            a(class=`lang-${lang_id}`)
              = `${lang_name}`
  .key-container
    .key-row
      +indirectly-related-key("key1")
      +left-arrow
      +directly-related-key("key2")
      +right-arrow
      +indirectly-related-key("key3")
    +dominant-arrow-row
    .key-row#tonic_key_row
      +directly-related-key("key4")
      +left-arrow
      +tonic-key("key5")
      +right-arrow
      +directly-related-key("key6")
    +subdominant-arrow-row
    .key-row#subdominant_key_row
      +indirectly-related-key("key7")
      +left-arrow
      +directly-related-key("key8")
      +right-arrow
      +indirectly-related-key("key9")
  .key-detail-box#inline(style={display: "none"})
    .key-detail
      .key-detail-heading
        .key-title
      .staff-box
        .staff#staff
  .footer-box
    .footer-text-box
      = "© 2018 "
      a(class="footer-site-link" href="https://diatonic.jp" target="_blank")= "diatonic.jp"
    .sns-link-box
      +link-icon("Tweet", "twitter", "fa-twitter")
      +link-icon("Facebook", "facebook", "fa-facebook-f")
      +link-icon("はてなブックマーク", "hatebu", "fa-hatebu")
      +link-icon("Project Page", "github", "fa-github")